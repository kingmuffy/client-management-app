<h2>Drafts</h2>

<mat-progress-bar *ngIf="loading()" mode="indeterminate"></mat-progress-bar>

@if (!loading() && drafts().length === 0) {
<div class="empty-state">
  <mat-icon class="empty-icon">drafts</mat-icon>
  <div class="empty-title">No drafts yet</div>
  <div class="empty-subtitle">
    When you start creating a client, you can save it as a draft and it will
    appear here.
  </div>
</div>
} @else if (!loading()) {
<table mat-table [dataSource]="drafts()" class="mat-elevation-z8">
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef>ID</th>
    <td mat-cell *matCellDef="let draft">{{ draft.id }}</td>
  </ng-container>

  <ng-container matColumnDef="fullName">
    <th mat-header-cell *matHeaderCellDef>Full Name</th>
    <td mat-cell *matCellDef="let draft">{{ draft.fullName }}</td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef>Email</th>
    <td mat-cell *matCellDef="let draft">{{ draft.email }}</td>
  </ng-container>

  <ng-container matColumnDef="location">
    <th mat-header-cell *matHeaderCellDef>Location</th>
    <td mat-cell *matCellDef="let draft">{{ draft.location }}</td>
  </ng-container>

  <ng-container matColumnDef="createdByEmail">
    <th mat-header-cell *matHeaderCellDef>Created By</th>
    <td mat-cell *matCellDef="let draft">{{ draft.createdByEmail }}</td>
  </ng-container>

  <ng-container matColumnDef="updatedAt">
    <th mat-header-cell *matHeaderCellDef>Last Updated</th>
    <td mat-cell *matCellDef="let draft">
      {{ draft.updatedAt | date : "short" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let draft">
      <button
        mat-icon-button
        color="warn"
        *ngIf="canManage"
        (click)="deleteDraft(draft, $event)"
        aria-label="Delete draft"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns"
    (click)="viewDraft(row)"
    class="clickable-row"
  ></tr>
</table>
}
